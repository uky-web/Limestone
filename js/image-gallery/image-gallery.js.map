{"version":3,"names":[],"mappings":"","sources":["image-gallery/image-gallery.js"],"sourcesContent":["/*\n * Image gallery has dependencies on jquery, slick, accessible-modal-window\n */\n\nconst fitCaption = ($c) => {\n  const $image = $c.find('img');\n  const $caption = $c.find('figcaption');\n  const w = $image.width();\n  if (w == 0) {\n    return;\n  }\n  const h = $image.height();\n  const r = w / h;\n  const captionWidth = (w < 300) ? '70vw' : w;\n\n\n  $caption.css({\n    maxWidth: captionWidth\n  });\n\n  if (r <= 1) {\n    $c.addClass('mfp-portrait');\n    $c.removeClass('mfp-landscape');\n  } else {\n    $c.addClass('mfp-landscape');\n    $c.removeClass('mfp-portrait');\n  }\n};\n\nconst image_gallery = () => {\n  const $gallery = $('.image-gallery');\n  if ($gallery.length < 1) return;\n\n  // Fire up the masonry layout\n  const $grid = $gallery.masonry({\n    columnWidth: '.image-gallery__block-sizer',\n    itemSelector: '.image-gallery__block'\n  });\n\n  // Reflow content in the layout as each image is loaded\n  $grid.imagesLoaded().progress(() => {\n    $grid.masonry('layout');\n  });\n\n\n  const $modals = $gallery.magnificPopup({\n    delegate: '.image-gallery__popup-launcher',\n    type: 'image',\n    mainClass: 'mfp-fade',\n    tLoading: 'Loading image #%curr%...',\n    gallery: {\n      enabled: true\n    },\n    navigateByImgClick: true,\n    preload: [0, 1],\n    image: {\n      tError: '<a href=\"%url%\">The image #%curr%</a> could not be loaded.',\n      verticalFit: false,\n      titleSrc: (item) => {\n        return $(item.el).find('figcaption').html();\n      }\n    }\n  });\n\n  $modals.on('mfpResize mfpImageLoadComplete mfpChange mfpOpen', (e) => {\n    if ($.magnificPopup.instance) {\n      fitCaption($.magnificPopup.instance.content);\n    }\n  });\n};\n"],"file":"image-gallery.js"}