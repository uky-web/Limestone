{"version":3,"sources":["accordion-panel/jquery-accessible-accordion.js"],"names":["factory","define","amd","exports","module","require","window","jQuery","$","defaultConfig","headersSelector","panelsSelector","buttonsSelector","buttonsGeneratedContent","button","class","type","buttonSuffixId","multiselectable","prefixClass","headerSuffixClass","buttonSuffixClass","panelSuffixClass","direction","accordionPrefixId","Accordion","$el","options","extend","$wrapper","$panels","initAttributes","initEvents","prototype","attr","toString","addClass","index_lisible","Math","random","slice","each","proxy","index","el","$panel","$header","$button","clone","html","text","before","panelId","buttonId","removeAttr","$buttons","on","focusButtonEventHandler","clickButtonEventHandler","keydownButtonEventHandler","keydownPanelEventHandler","e","$target","target","is","closest","not","setTimeout","focus","stopPropagation","preventDefault","$firstButton","first","$lastButton","last","k","prev","next","allKeyCode","concat","inArray","keyCode","ctrlKey","eq","goToHeader","length","PLUGIN","fn","params","defaults","specificOptions","data"],"mappings":"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","file":"jquery-accessible-accordion.js","sourcesContent":["/*\n * jQuery Accessible Accordion system, using ARIA\n * @version v2.5.2\n * Website: https://a11y.nicolas-hoffmann.net/accordion/\n * License MIT: https://github.com/nico3333fr/jquery-accessible-accordion-aria/blob/master/LICENSE\n */\n(function(factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery'], factory);\n    } else if (typeof exports !== 'undefined') {\n        module.exports = factory(require('jquery'));\n    } else {\n        factory(window.jQuery);\n    }\n}(function($) {\n    'use strict';\n\n    var defaultConfig = {\n        headersSelector: '.js-accordion__header',\n        panelsSelector: '.js-accordion__panel',\n        buttonsSelector: 'button.js-accordion__header',\n        buttonsGeneratedContent: 'text',\n        button: $('<button></button>', {\n            class: 'js-accordion__header',\n            type: 'button'\n        }),\n        buttonSuffixId: '_tab',\n        multiselectable: true,\n        prefixClass: 'accordion',\n        headerSuffixClass: '__title',\n        buttonSuffixClass: '__header',\n        panelSuffixClass: '__panel',\n        direction: 'ltr',\n        accordionPrefixId: 'accordion'\n    };\n\n    var Accordion = function($el, options) {\n        this.options = $.extend({}, defaultConfig, options);\n\n        this.$wrapper = $el;\n        this.$panels = $(this.options.panelsSelector, this.$wrapper);\n\n        this.initAttributes();\n        this.initEvents();\n    };\n\n    Accordion.prototype.initAttributes = function() {\n        this.$wrapper.attr({\n            'role': 'tablist',\n            'aria-multiselectable': this.options.multiselectable.toString()\n        }).addClass(this.options.prefixClass);\n\n        // id generated if not present\n        if (!this.$wrapper.attr('id')) {\n            var index_lisible = Math.random().toString(32).slice(2, 12);\n            this.$wrapper.attr('id', this.options.accordionPrefixId + '-' + index_lisible);\n        }\n\n        this.$panels.each($.proxy(function(index, el) {\n            var $panel = $(el);\n            var $header = $(this.options.headersSelector, $panel);\n            var $button = this.options.buttonsGeneratedContent === 'html' ? this.options.button.clone().html($header.html()) : this.options.button.clone().text($header.text());\n\n            $header.attr('tabindex', '0').addClass(this.options.prefixClass + this.options.headerSuffixClass);\n            $panel.before($button);\n\n            var panelId = $panel.attr('id') || this.$wrapper.attr('id') + '-' + index;\n            var buttonId = panelId + this.options.buttonSuffixId;\n\n            $button.attr({\n                'aria-controls': panelId,\n                'aria-expanded': 'false',\n                'role': 'tab',\n                'id': buttonId,\n                'tabindex': '-1',\n                'aria-selected': 'false'\n            }).addClass(this.options.prefixClass + this.options.buttonSuffixClass);\n\n            $panel.attr({\n                'aria-labelledby': buttonId,\n                'role': 'tabpanel',\n                'id': panelId,\n                'aria-hidden': 'true'\n            }).addClass(this.options.prefixClass + this.options.panelSuffixClass);\n\n            // if opened by default\n            if ($panel.attr('data-accordion-opened') === 'true') {\n                $button.attr({\n                    'aria-expanded': 'true',\n                    'data-accordion-opened': null\n                });\n\n                $panel.attr({\n                    'aria-hidden': 'false'\n                });\n            }\n\n            // init first one focusable\n            if (index === 0) {\n                $button.removeAttr('tabindex');\n            }\n        }, this));\n\n        this.$buttons = $(this.options.buttonsSelector, this.$wrapper);\n    };\n\n    Accordion.prototype.initEvents = function() {\n        this.$wrapper.on('focus', this.options.buttonsSelector, $.proxy(this.focusButtonEventHandler, this));\n\n        this.$wrapper.on('click', this.options.buttonsSelector, $.proxy(this.clickButtonEventHandler, this));\n\n        this.$wrapper.on('keydown', this.options.buttonsSelector, $.proxy(this.keydownButtonEventHandler, this));\n\n        this.$wrapper.on('keydown', this.options.panelsSelector, $.proxy(this.keydownPanelEventHandler, this));\n    };\n\n    Accordion.prototype.focusButtonEventHandler = function(e) {\n        var $target = $(e.target);\n        var $button = $target.is('button') ? $target : $target.closest('button');\n\n        $(this.options.buttonsSelector, this.$wrapper).attr({\n            'tabindex': '-1',\n            'aria-selected': 'false'\n        });\n\n        $button.attr({\n            'aria-selected': 'true',\n            'tabindex': null\n        });\n    };\n\n    Accordion.prototype.clickButtonEventHandler = function(e) {\n        var $target = $(e.target);\n        var $button = $target.is('button') ? $target : $target.closest('button');\n        var $panel = $('#' + $button.attr('aria-controls'));\n\n        this.$buttons.attr('aria-selected', 'false');\n        $button.attr('aria-selected', 'true');\n\n        // opened or closed?\n        if ($button.attr('aria-expanded') === 'false') { // closed\n            $button.attr('aria-expanded', 'true');\n            $panel.attr('aria-hidden', 'false');\n        } else { // opened\n            $button.attr('aria-expanded', 'false');\n            $panel.attr('aria-hidden', 'true');\n        }\n\n        if (this.options.multiselectable === false) {\n            this.$panels.not($panel).attr('aria-hidden', 'true');\n            this.$buttons.not($button).attr('aria-expanded', 'false');\n        }\n\n        setTimeout(function() {\n            $button.focus();\n        }, 0);\n\n        e.stopPropagation();\n        e.preventDefault();\n    };\n\n    Accordion.prototype.keydownButtonEventHandler = function(e) {\n        var $target = $(e.target);\n        var $button = $target.is('button') ? $target : $target.closest('button');\n        var $firstButton = this.$buttons.first();\n        var $lastButton = this.$buttons.last();\n        var index = this.$buttons.index($button);\n\n        $target = null;\n\n        var k = this.options.direction === 'ltr' ? {\n            prev: [38, 37], // up & left\n            next: [40, 39], // down & right\n            first: 36, // home\n            last: 35 // end\n        } : {\n            prev: [38, 39], // up & left\n            next: [40, 37], // down & right\n            first: 36, // home\n            last: 35 // end\n        };\n\n        var allKeyCode = [].concat(k.prev, k.next, k.first, k.last);\n\n        if ($.inArray(e.keyCode, allKeyCode) >= 0 && !e.ctrlKey) {\n            this.$buttons.attr({\n                'tabindex': '-1',\n                'aria-selected': 'false'\n            });\n\n\n            if (e.keyCode === 36) {\n                $target = $firstButton;\n            }\n            // strike end in the tab => last tab\n            else if (e.keyCode === 35) {\n                $target = $lastButton;\n            }\n            // strike up or left in the tab => previous tab\n            else if ($.inArray(e.keyCode, k.prev) >= 0) {\n                // if we are on first one, activate last\n                $target = $button.is($firstButton) ? $lastButton : this.$buttons.eq(index - 1);\n            }\n            // strike down or right in the tab => next tab\n            else if ($.inArray(e.keyCode, k.next) >= 0) {\n                // if we are on last one, activate first\n                $target = $button.is($lastButton) ? $firstButton : this.$buttons.eq(index + 1);\n            }\n\n            if ($target !== null) {\n                this.goToHeader($target);\n            }\n\n            e.preventDefault();\n        }\n    };\n\n    Accordion.prototype.keydownPanelEventHandler = function(e) {\n        var $panel = $(e.target).closest(this.options.panelsSelector);\n        var $button = $('#' + $panel.attr('aria-labelledby'));\n        var $firstButton = this.$buttons.first();\n        var $lastButton = this.$buttons.last();\n        var index = this.$buttons.index($button);\n        var $target = null;\n\n        // strike up + ctrl => go to header\n        if (e.keyCode === 38 && e.ctrlKey) {\n            $target = $button;\n        }\n        // strike pageup + ctrl => go to prev header\n        else if (e.keyCode === 33 && e.ctrlKey) {\n            $target = $button.is($firstButton) ? $lastButton : this.$buttons.eq(index - 1);\n        }\n        // strike pagedown + ctrl => go to next header\n        else if (e.keyCode === 34 && e.ctrlKey) {\n            $target = $button.is($lastButton) ? $firstButton : this.$buttons.eq(index + 1);\n        }\n\n        if ($target !== null) {\n            this.goToHeader($target);\n            e.preventDefault();\n        }\n    };\n\n    Accordion.prototype.goToHeader = function($target) {\n        if ($target.length !== 1) {\n            return;\n        }\n\n        $target.attr({\n            'aria-selected': 'true',\n            'tabindex': null\n        });\n\n        setTimeout(function() {\n            $target.focus();\n        }, 0);\n    };\n\n\n    var PLUGIN = 'accordion';\n\n    $.fn[PLUGIN] = function(params) {\n        var options = $.extend({}, $.fn[PLUGIN].defaults, params);\n\n\n        return this.each(function() {\n            var $el = $(this);\n\n            var specificOptions = {\n                multiselectable: $el.attr('data-accordion-multiselectable') === 'none' ? false : options.multiselectable,\n                prefixClass: typeof($el.attr('data-accordion-prefix-classes')) !== 'undefined' ? $el.attr('data-accordion-prefix-classes') : options.prefixClass,\n                buttonsGeneratedContent: typeof($el.attr('data-accordion-button-generated-content')) !== 'undefined' ? $el.attr('data-accordion-button-generated-content') : options.buttonsGeneratedContent,\n                direction: $el.closest('[dir=\"rtl\"]').length > 0 ? 'rtl' : options.direction\n            };\n            specificOptions = $.extend({}, options, specificOptions);\n\n            $el.data[PLUGIN] = new Accordion($el, specificOptions); \n        });\n    };\n\n    $.fn[PLUGIN].defaults = defaultConfig;\n\n}));\n"]}